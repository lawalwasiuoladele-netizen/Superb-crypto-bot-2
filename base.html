<!doctype html>
<html>
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <title>Superb Crypto Bot Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"/>
    <style>
      body { padding: 20px; }
      .logbox {
        height: 360px;
        overflow: auto;
        background: #0b1220;
        color: #e6eef8;
        padding: 10px;
        font-family: monospace;
        white-space: pre-wrap;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h3>Superb Crypto Bot â€” Dashboard</h3>
      <p class="text-muted">
        Add multiple Bybit accounts (API Key + Secret). Start/Stop bot. Live logs stream below.
      </p>

      {% block content %}{% endblock %}
    </div>

    <script>
      const evtSource = new EventSource("/stream");
      const logBox = document.getElementById("log");
      if (logBox) {
        evtSource.onmessage = function(e) {
          logBox.innerText += e.data + "\n";
          logBox.scrollTop = logBox.scrollHeight;
        };
        evtSource.onerror = function(e) {
          console.error("SSE error", e);
        };
      }
    </script>
  </body>
</html>
