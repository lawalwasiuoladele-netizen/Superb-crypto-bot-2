
<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Superb Crypto Bot Dashboard</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
    h1 { color: #333; }
    form { margin-bottom: 15px; }
    input { padding: 5px; margin: 3px; }
    button { padding: 6px 12px; margin: 3px; }
    .log-box { 
      width: 100%; 
      height: 300px; 
      border: 1px solid #ccc; 
      background: #fff; 
      overflow-y: scroll; 
      padding: 10px; 
      font-family: monospace; 
      white-space: pre-wrap;
    }
    .status { margin: 10px 0; padding: 10px; background: #e8e8e8; }
  </style>
</head>
<body>
  <h1>Superb Crypto Bot</h1>

  <div class="status">
    <p><b>Status:</b> <span id="status-text">{{ "Running ✅" if running else "Stopped ❌" }}</span></p>
    <p><b>Trades today:</b> <span id="trade-count">0</span></p>
  </div>

  <h2>Accounts</h2>
  <ul>
    {% for acct in accounts %}
      <li>
        {{ acct.key }} 
        <form method="post" action="/remove_account" style="display:inline;">
          <input type="hidden" name="index" value="{{ acct.index }}">
          <button type="submit">Remove</button>
        </form>
      </li>
    {% else %}
      <li>No accounts yet</li>
    {% endfor %}
  </ul>

  <h3>Add Account</h3>
  <form method="post" action="/add_account">
    <input type="text" name="key" placeholder="API Key" required>
    <input type="text" name="secret" placeholder="API Secret" required>
    <button type="submit">Add</button>
  </form>

  <h2>Controls</h2>
  <form method="post" action="/start" style="display:inline;">
    <button type="submit">Start Bot</button>
  </form>
  <form method="post" action="/stop" style="display:inline;">
    <button type="submit">Stop Bot</button>
  </form>

  <h2>Live Logs</h2>
  <div id="logs" class="log-box"></div>

  <script>
    // Live logs via SSE
    const logBox = document.getElementById("logs");
    const evtSource = new EventSource("/stream");
    evtSource.onmessage = function(e) {
      logBox.textContent += e.data + "\\n";
      logBox.scrollTop = logBox.scrollHeight;
    };

    // Auto
